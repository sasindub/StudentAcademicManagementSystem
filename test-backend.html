<!DOCTYPE html>
<html>
<head>
    <title>Test Backend</title>
</head>
<body>
    <h1>Testing Backend API</h1>
    <div id="results"></div>
    
    <script>
        const results = document.getElementById('results');
        
        // Test 1: Health endpoint
        results.innerHTML += '<h2>Test 1: Health Check</h2>';
        fetch('https://sams-neon.vercel.app/health')
            .then(r => r.json())
            .then(data => {
                results.innerHTML += '<pre>✅ Health: ' + JSON.stringify(data, null, 2) + '</pre>';
            })
            .catch(err => {
                results.innerHTML += '<pre>❌ Health Error: ' + err.message + '</pre>';
            });
        
        // Test 2: Root endpoint
        results.innerHTML += '<h2>Test 2: Root</h2>';
        fetch('https://sams-neon.vercel.app/')
            .then(r => r.json())
            .then(data => {
                results.innerHTML += '<pre>✅ Root: ' + JSON.stringify(data, null, 2) + '</pre>';
            })
            .catch(err => {
                results.innerHTML += '<pre>❌ Root Error: ' + err.message + '</pre>';
            });
        
        // Test 3: OPTIONS request (CORS preflight)
        results.innerHTML += '<h2>Test 3: CORS Preflight</h2>';
        fetch('https://sams-neon.vercel.app/auth/login', {
            method: 'OPTIONS',
            headers: {
                'Origin': 'https://samsapp.vercel.app',
                'Access-Control-Request-Method': 'POST',
                'Access-Control-Request-Headers': 'content-type'
            }
        })
        .then(r => {
            results.innerHTML += '<pre>✅ CORS Preflight Status: ' + r.status + '</pre>';
            results.innerHTML += '<pre>Headers: ' + JSON.stringify(Object.fromEntries(r.headers.entries()), null, 2) + '</pre>';
        })
        .catch(err => {
            results.innerHTML += '<pre>❌ CORS Preflight Error: ' + err.message + '</pre>';
        });
        
        // Test 4: Actual login request
        setTimeout(() => {
            results.innerHTML += '<h2>Test 4: Login Request</h2>';
            fetch('https://sams-neon.vercel.app/auth/login', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    username: 'Admin',
                    password: 'Abc@12345'
                })
            })
            .then(r => r.json())
            .then(data => {
                results.innerHTML += '<pre>✅ Login: ' + JSON.stringify(data, null, 2) + '</pre>';
            })
            .catch(err => {
                results.innerHTML += '<pre>❌ Login Error: ' + err.message + '</pre>';
            });
        }, 2000);
    </script>
</body>
</html>

